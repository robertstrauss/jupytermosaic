"use strict";(self.webpackChunkmosaic=self.webpackChunkmosaic||[]).push([[575],{575:(e,t,i)=>{i.r(t),i.d(t,{default:()=>A});var s=i(219),o=i(316),n=i(417),r=i(333),l=i(722),a=i(49),d=i(53),c=i(222),h=i(262),g=i(227);class u extends l.NotebookViewModel{constructor(e,t,i){super([],i),this.direction=t,this.tilesEstimatedWidth=new Map,this.tilesEstimatedHeight=new Map,this._widgetSizersRow=[],this._widgetSizersCol=[],this._tiles=null,this.widgetRenderer=u.prototype._widgetRenderer.bind(this),this.estimateWidgetSize=u.prototype._estimateWidgetSize.bind(this),this.tiles=e,Object.defineProperty(this,"_widgetSizers",{get(){return"row"==this.direction?this._widgetSizersRow:"col"==this.direction?this._widgetSizersCol:void 0}}),this._getItemMetadata=this.getItemMetadata}set tiles(e){this._tiles=e,this.itemsList=e}get tiles(){return this._tiles}onListChanged(e,t){return super.onListChanged(e,t)}_getWidgetCount(){var e;return(null===(e=this.tiles)||void 0===e?void 0:e.length)||0}get widgetCount(){return this._getWidgetCount()}_widgetRenderer(e){return this.tiles.get(e)}setWidgetSize(e,t="mode"){return"mode"==t&&(t=this.direction),super.setWidgetSize.bind(new Proxy(this,{get:(e,i,s)=>"_widgetSizers"==i?"row"==t?e._widgetSizersRow:e._widgetSizersCol:Reflect.get(e,i,s)}))(e)}_estimateWidgetSize(e){var t;return(null===(t=this.tiles)||void 0===t?void 0:t.get(e))?"row"==this.direction?this.estimateWidgetWidth(e):this.estimateWidgetHeight(e):(console.warn(`estimateWidgetSize requested for item ${e} in mosaic with only ${this.widgetCount} items`),0)}estimateWidgetHeight(e){const t=this.tiles.get(e);if(t instanceof a.Cell){const e=t.model,i=this.tilesEstimatedHeight.get(e.id);if("number"==typeof i)return i;const s=e.sharedModel.getSource().split("\n").length;let o=0;if(e instanceof a.CodeCellModel&&!e.isDisposed)for(let t=0;t<e.outputs.length;t++){const i=e.outputs.get(t).data["text/plain"];"string"==typeof i?o+=i.split("\n").length:Array.isArray(i)&&(o+=i.join("").split("\n").length)}return l.NotebookViewModel.DEFAULT_EDITOR_LINE_HEIGHT*(s+o)+l.NotebookViewModel.DEFAULT_CELL_MARGIN}{const e=this.tilesEstimatedHeight.get(t.groupID);return"number"==typeof e?e:t.getEstimatedTotalHeight()}}estimateWidgetWidth(e){const t=this.tiles.get(e);if(t instanceof a.Cell)return u.CELL_MIN_WIDTH;{const e=this.tilesEstimatedWidth.get(t.groupID);return"number"==typeof e?e:t.getEstimatedTotalWidth()}}set measuredAllUntilIndex(e){this._measuredAllUntilIndex=e}getEstimatedTotalSize(e="mode"){"mode"==e&&(e=this.direction);const t="row"==e?this._widgetSizersRow:this._widgetSizersCol;let i=0;if(this.measuredAllUntilIndex>=this.widgetCount&&(this.measuredAllUntilIndex=this.widgetCount-1),this.measuredAllUntilIndex>=0){const e=t[this.measuredAllUntilIndex];i=e.offset+e.size}let s=0;for(let e=this.measuredAllUntilIndex+1;e<this.widgetCount;e++){const i=t[e];s+=(null==i?void 0:i.measured)?i.size:this.estimateWidgetSize(e)}return i+s}getEstimatedTotalHeight(){if("col"==this.direction)return this.getEstimatedTotalSize("col");let e=0;for(let t=0;t<this.widgetCount;t++){const i=this._widgetSizersCol[t];e=Math.max(e,(null==i?void 0:i.measured)?i.size:this.estimateWidgetHeight(t))}return e}getEstimatedTotalWidth(){if("row"==this.direction)return this.getEstimatedTotalSize("row");let e=0;for(let t=0;t<this.widgetCount;t++){const i=this._widgetSizersRow[t];e=Math.max(e,(null==i?void 0:i.measured)?i.size:this.estimateWidgetWidth(t))}return e}get measuredAllUntilIndex(){return-1}getItemMetadata(e){var t;for(const i of["row","col"]){const s={row:this._widgetSizersRow,col:this._widgetSizersCol}[i];if(e>this.measuredAllUntilIndex){let o=0;if(this.measuredAllUntilIndex>=0){const e=s[this.measuredAllUntilIndex];o=e.offset+e.size}for(let n=this.measuredAllUntilIndex+1;n<=e;n++){let e,r=!1;if(null===(t=s[n])||void 0===t?void 0:t.measured)e=s[n].size,r=!0;else{const t=this.widgetRenderer(n);if((null==t?void 0:t.node)&&t.node.isConnected&&"none"!=t.node.style.display){const s=t.node.getBoundingClientRect();e="row"==i?s.width:s.height,r=!0}else e="row"==i?this.estimateWidgetWidth(n):this.estimateWidgetHeight(n),r=!1}s[n]={offset:o,size:e,measured:r},o+=e}for(let t=e+1;t<s.length;t++){const e=s[t],i=s[t-1];e.offset=i.offset+i.size}}for(let e=0;e<=this.measuredAllUntilIndex;e++){const t=s[e];if(0===e){if(0!==t.offset)throw new Error("First offset is not null")}else{const i=s[e-1];if(t.offset!==i.offset+i.size)throw new Error(`Sizer ${e} has incorrect offset.`)}}}return"row"==this.direction?this._widgetSizersRow[e]:this._widgetSizersCol[e]}getRangeToRender(){const e=this.widgetCount;return[0,e-1,0,e-1]}}u.CELL_MIN_WIDTH=160,a.Cell;class p extends g.ObservableList{constructor(){super(),this.changed.connect((e,t)=>{})}splice(e,t,...i){const s=[];for(let i=0;i<t;i++)s.push(this.remove(e));for(let t=0;t<i.length;t++)this.insert(e+t,i[t]);return s}map(e){const t=[];for(let i=0;i<this.length;i++)t.push(e(this.get(i)));return t}indexOf(e){const t=this._itemCmp;return d.ArrayExt.findFirstIndex(this._array,i=>t(i,e))}removeValue(e){const t=this._itemCmp,i=d.ArrayExt.findFirstIndex(this._array,i=>t(i,e));return i<0||this.remove(i),i}}class m extends l.NotebookWindowedLayout{detachWidget(e,t){t.parent&&t.parent!==this.parent||super.detachWidget(e,t)}}class f extends c.WindowedList{constructor(e,t="col"){const i=new p;super({model:new u(i,t,{overscanCount:f.defaultConfig.overscanCount,windowingActive:!0}),layout:new m,renderer:c.WindowedList.defaultRenderer,scrollbar:!1}),this.groupID=e,this.direction=t,this._superMosaic=null,this._ready=new h.PromiseDelegate,this.tiles=i,this.mosaics=new Map,this._placeholder=!0,this.addClass(f.NODE_CLASS),this.tiles.changed.connect(this.onTreeChanged,this),this._onItemResize=this.onItemResize,this._updateTotalSize=this.updateTotalSize}get superMosaic(){return this._superMosaic}set superMosaic(e){null!==this._superMosaic&&e!==this._superMosaic&&this._superMosaic.tiles.removeValue(this),this._superMosaic=e}get path(){return[...null!==this.superMosaic?this.superMosaic.path:[],this.groupID]}onTreeChanged(e,t){switch(t.type){case"clear":case"remove":setTimeout(()=>{this.checkEmpty()},250);break;case"set":case"add":for(const e of t.newValues)f.setParent(e,this),e instanceof f||e instanceof a.Cell&&(f.setPath(e,this.path),e.disposed.connect((e,t)=>{console.log("dispose!"),setTimeout(()=>this.checkEmpty(),250)}))}if(requestAnimationFrame(()=>this.update()),this.superMosaic){const e=this.superMosaic.tiles.indexOf(this);e>-1&&this.superMosaic.onTreeChanged(this.superMosaic.tiles,{type:"set",newIndex:e,newValues:[this],oldIndex:e,oldValues:[this]})}}treeGet(e,t=0){return t<e.length?this.mosaics.get(e[t]).treeGet(e,t+1):this}treeGetExisting(e,t=0){if(t<e.length){const i=this.mosaics.get(e[t]);return void 0!==i?i.treeGetExisting(e,t+1):[this,t]}return[this,t]}addTile(e="",t=-1){""==e&&(e=f.newUGID());const i=new f(e);return this.splice(t,0,i),i}growBranch(e,t=[],i=0){if(i<e.length){let s=this.mosaics.get(e[i]);return null==s&&(s=this.addTile(e[i],t[i]||-1)),s.growBranch(e,t,i+1)}return this}splice(e,t,...i){e<0&&(e=this.tiles.length),this.tiles.splice(e,t,...i)}checkEmpty(){if(this.tiles.length<2){const e=this.tiles.get(0);e&&e instanceof f&&e.unwrap(),this.unwrap()}}unwrap(){if(!this.superMosaic)return;const e=this.superMosaic.tiles.removeValue(this);this.tiles.length>0&&(console.log("im not empty"),this.superMosaic.tiles.splice(e,0,...this.tiles),console.log("gave to parent:",f.showMosaic(this.superMosaic)))}getLeaf(e){let t=0;for(const i of this.tiles)if(i instanceof a.Cell){if(t==e)return[[this,i],t];t+=1}else{const[s,o]=i.getLeaf(e-t);if(null!==s)return[s,o];t+=o}return[null,t]}findGroup(e){for(const t in this.mosaics){if(this.mosaics.get(t).node===e)return[t];const i=this.mosaics.get(t).findGroup(e);if(null!==i)return[t,...i]}return null}isPlaceholder(){return this.placeholder}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder!==e&&!1===e?(this.initializeDOM(),this._placeholder=e,this._ready.resolve()):1==e&&(this.node.style.border="1px solid blue")}initializeDOM(){this.placeholder&&(this.node.style.border="1px solid red")}get ready(){return this._ready.promise}onAfterAttach(e){this.update(),super.onAfterAttach(e),this.direction="col"==this.parent.direction?"row":"col",this.viewModel.direction=this.direction,this.viewportNode.classList.add(f.INNER_GROUP_CLASS,f.DIR_CLASS[this.direction])}onScroll(e){if(super.onScroll(e),"row"==this.direction){const{clientWidth:t,scrollWidth:i,scrollLeft:s}=e.currentTarget;if(Math.abs(this.viewModel.scrollOffset-s)>1){const e=Math.max(0,Math.min(s,i-t));this.viewModel.scrollOffset=e,this.viewModel.windowingActive&&this.update()}}}onResize(e){const t=this.viewModel.height;this.viewModel.height=e.height>=0?e.height:this.node.getBoundingClientRect().height,this.viewModel.height!==t&&this._updater.invoke(),super.onResize(e),this._updater.invoke()}onItemResize(e){if(this._resetScrollToItem(),!this.isHidden&&!this.isParentHidden)for(const t of["row","col"]){const i=[];for(let s of e){const e="row"==t?s.borderBoxSize[0].inlineSize:s.borderBoxSize[0].blockSize;s.target.isConnected&&e>0&&i.push({index:parseInt(s.target.dataset.windowedListIndex,10),size:e})}this.viewModel.setWidgetSize(i,t)&&(this._scrollBackToItemOnResize(),this.update()),requestAnimationFrame(()=>this.update())}}get innerElement(){return this._innerElement}updateTotalSize(){if(this.viewModel.windowingActive){if("true"==this.viewportNode.dataset.isScrolling)return void(this._requiresTotalSizeUpdate=!0);let e=this.viewModel.getEstimatedTotalHeight();"row"==this.direction&&(e+=2*f.CSS.rowPaddingTop),this.innerElement.style.height=`${e}px`,this.viewportNode.scrollWidth>this.viewportNode.clientWidth||this.viewportNode.scrollHeight>this.viewportNode.clientHeight?(this.viewportNode.classList.add("mosaic-scrolling"),this.viewportNode.style.setProperty("--scroll-width",`${this.viewportNode.scrollWidth}px`),this.viewportNode.style.setProperty("--scroll-height",`${this.viewportNode.scrollHeight}px`)):this.viewportNode.classList.remove("mosaic-scrolling")}}getEstimatedTotalHeight(){return this.viewModel.getEstimatedTotalHeight()}getEstimatedTotalWidth(){return this.viewModel.getEstimatedTotalWidth()}renderCellOutputs(e){const t=this.viewModel.widgetRenderer(e);if(t instanceof a.CodeCell&&t.isPlaceholder()){const i=t;i.dataset.windowedListIndex=`${e}`,this.layout.insertWidget(e,i),requestAnimationFrame(()=>{this.layout.removeWidget(i)})}else if(t instanceof f&&t.isPlaceholder()){const e=t;for(let t=0;t<e.tiles.length;t++)e.renderCellOutputs(t)}}detachWidget(){}}f.METADATA_NAME="mosaic",f.NODE_CLASS="mosaic-group-outer",f.INNER_GROUP_CLASS="mosaic-group-inner",f.DIR_CLASS={row:"mosaic-row",col:"mosaic-col"},f.CSS={rowPaddingTop:5,colPaddingLeft:5},f.defaultConfig={overscanCount:3},function(e){e.showMosaic=function(t){return t instanceof e||t instanceof _?t.tiles._array.map(e.showMosaic):t instanceof a.Cell?"Cell:"+t.prompt:t},e.getPath=function(t){return t.model.getMetadata(e.METADATA_NAME)},e.setPath=function(t,i){return t.model.setMetadata(e.METADATA_NAME,i)},e.setParent=function(e,t){e.superMosaic&&e.superMosaic!==t&&e.superMosaic.tiles.removeValue(e),e.superMosaic=t,e.parent=t},e.divergeDepth=function(e,t){for(let i=0;i<e.length;i++)if(t.length<=i||e[i]!==t[i])return i;return e.length},e.newUGID=function(){return"mg-"+crypto.randomUUID()}}(f||(f={}));const w="jp-mod-dropTarget",v="jp-Cell",M="application/vnd.jupyter.cells";function C(e,t){const i=t.getBoundingClientRect(),s=e.clientX,o=e.clientY,n=Math.abs(o-i.top),r=Math.abs(s-i.left),l=Math.abs(o-i.bottom),a=Math.abs(s-i.right);switch(Math.min(n,r,l,a)){case n:return"top";case r:return"left";case l:return"bottom";case a:return"right";default:return"top"}}var y;!function(e){class t extends l.NotebookPanel.ContentFactory{createNotebook(e){return new _(e)}}e.ContentFactory=t}(y||(y={}));class _ extends l.Notebook{constructor(e){var t,i;super(e),this.direction="col",this.superMosaic=null,this.path=[],this.addTile=f.prototype.addTile.bind(this),this.growBranch=f.prototype.growBranch.bind(this),this.splice=f.prototype.splice.bind(this),this.treeGetExisting=f.prototype.treeGetExisting.bind(this),this.getLeaf=f.prototype.getLeaf.bind(this),this.findGroup=f.prototype.findGroup.bind(this),this.renderCellOutputs=f.prototype.renderCellOutputs.bind(this),this.unwrap=()=>{},this.checkEmpty=()=>{},this.tiles=new p,this.mosaics=new Map,this.options={...e,direction:"col",notebook:this},this.notebook=this;const s=new u(this.tiles,"col",{overscanCount:null!==(i=null===(t=e.notebookConfig)||void 0===t?void 0:t.overscanCount)&&void 0!==i?i:f.defaultConfig.overscanCount,windowingActive:!0});Object.defineProperty(this.viewModel,"widgetCount",{get:s._getWidgetCount.bind(s)}),this.viewModel.estimateWidgetSize=s._estimateWidgetSize.bind(s),this.viewModel.widgetRenderer=s._widgetRenderer.bind(s),this._evtDrop=e=>function(e,t){if(!t.mimeData.hasData(M))return;if(t.preventDefault(),t.stopPropagation(),"none"===t.proposedAction)return void(t.dropAction="none");let i=t.target;for(;i&&i.parentElement;){if(i.classList.contains(w)){i.classList.remove(w);break}i=i.parentElement}e.model;const s=t.source;if(s===e){t.dropAction="move";const o=t.mimeData.getData("internal:cells"),n=o[o.length-1];if(n instanceof a.MarkdownCell&&n.headingCollapsed){const e=l.NotebookActions.findNextParentHeading(n,s);if(e>0){const t=(0,d.findIndex)(s.widgets,e=>n.model.id===e.model.id);o.push(...s.widgets.slice(t+1,e))}}let r,c=d.ArrayExt.firstIndexOf(e.widgets,o[0]),h=e._findCell(i),g=[];if(h<0){for(;i&&i.parentElement;){if(i.classList.contains(f.NODE_CLASS)){i.classList.remove(w);break}i=i.parentElement}i&&i.parentElement||(h=-1,i=e.viewportNode,s.viewportNode.classList.remove(w))}const u=i.dataset.mosaicDropSide||C(t,i),p="bottom"==u||"top"==u,m="left"==u||"right"==u,M="top"==u||"left"==u,y="bottom"==u||"right"==u;if(h<0)if(i.classList.contains(f.NODE_CLASS)){const t=i.getElementsByClassName(v);if(h=e._findCell(t[M?0:t.length-1]),h<0)return;r=e.widgets[h],g=f.getPath(r),g.length>0&&(g=g.slice(0,g.length-1))}else r=e.widgets[e.widgets.length-1];else r=e.widgets[h],g=f.getPath(r)||[];const _=g.length%2==0?"col":"row";("row"==_&&p||"col"==_&&m)&&(g=[...g,f.newUGID()],r.model.setMetadata(f.METADATA_NAME,g));let b,E=0,S=f.getPath(o[0])||[];for(let e of o){const t=f.getPath(e);E=f.divergeDepth(t,S),S=t.slice(0,E)}o.length>1&&E%2!=g.length%2&&(b=f.newUGID());for(const e of o){const t=f.getPath(e);b&&t.splice(E,0,b),f.setPath(e,[...g,...t.slice(E)])}-1===h&&(h=e.widgets.length-1);let I=h;if(y&&(h+=1),h!==e.widgets.length-1&&-1!==h&&h>c&&(h-=1),h>=c&&h<c+o.length){I=Math.min(c,I),console.log("first changed cell",e.widgets[I].prompt);for(let t=0;t<o.length+1;t++)console.log("mos insert","Cell:"+e.widgets[I+t].prompt),e.mosaicInsert(I+t);return}e.moveCell(c,h,o.length),h>c&&(I-=o.length),console.log("first changed cell",e.widgets[I].prompt);for(let t=0;t<o.length+1;t++)console.log("mos insert","Cell:"+e.widgets[I+t].prompt),e.mosaicInsert(I+t)}}(this,e),this._evtDragOver=e=>function(e,t){if(!t.mimeData.hasData(M))return;t.preventDefault(),t.stopPropagation(),t.dropAction=t.proposedAction;const i=e.node.getElementsByClassName(w);i.length&&i[0].classList.remove(w);let s=t.target;for(;s&&s.parentElement&&!s.classList.contains(v);)s=s.parentElement;let o=e._findCell(s);const n=C(t,s);if(-1===o){for(;s&&s.parentElement;){if(s.classList.contains(f.NODE_CLASS)){s.classList.add(w),s.dataset.mosaicDropSide=n;break}s=s.parentElement}s&&s.parentElement||(t.source.viewportNode.classList.add(w),t.source.viewportNode.dataset.mosaicDropSide="bottom")}else{const t=e.cellsArray[o];t.node.classList.add(w),t.node.dataset.mosaicDropSide=n}}(this,e),this._updateForDeferMode=this._myupdateForDeferMode,this.tiles.changed.connect(this.onTreeChanged,this),console.log("=".repeat(15))}onTreeChanged(e,t){f.prototype.onTreeChanged.bind(this)(e,t),console.log(this.tiles,f.showMosaic(this)),requestAnimationFrame(()=>this.update())}get model(){return super.model}set model(e){super.model=e,this.viewModel.itemsList=null}moveCell(e,t,i=1){for(let e=t;e<t+i;e++);super.moveCell(e,t,i)}onCellInserted(e,t){super.onCellInserted(e,t),console.warn("ic",e,"Cell:"+t.prompt,t,t.model.metadata.mosaic),this.mosaicInsert(e)}onCellRemoved(e,t){super.onCellRemoved(e,t),console.warn("rc",e,"Cell:"+t.prompt,t);const[i]=this.getLeaf(e);if(null!==i){const[e,s]=i;s==t&&(e.tiles.removeValue(s),console.log("removed"))}}async _myupdateForDeferMode(e,t){const[i,s]=this.mosaicInsert(t);e.dataset.windowedListIndex=`${s}`,i.layout.insertWidget(s,e),await e.ready}graft(e,t,i,s,o,n=0){let r=i.superMosaic,l=i;for(let e=s.length;e>o;e--)l=r,r=l.superMosaic;let a=r.tiles.indexOf(l);if(console.log("ref",r,l,a),a<0?(console.error("referrence leaf/branch missing!"),r=this,a=this.tiles.length):a+=n,o<t.length){const i=r.growBranch(t.slice(o),[a]);return i.splice(0,0,e),console.log("grafted","branch:"+i.path,"to",r.path,"at",a),[i,a]}return r.splice(a,0,e),console.log("grafted","Cell:"+e.prompt,"to",r.groupID,"at",a),[r,a]}mosaicInsert(e){var t,i;const s=this.cellsArray[e-1],o=this.cellsArray[e],n=this.cellsArray[e+1];f.setParent(o,null);let r=(null===(t=null==s?void 0:s.superMosaic)||void 0===t?void 0:t.path)||[],l=f.getPath(o),a=(null===(i=null==n?void 0:n.superMosaic)||void 0===i?void 0:i.path)||[];if(0===e&&!n){const e=this.growBranch(l||[]);return e.splice(0,0,o),console.log("grafting initial cell",o,e),[e,0]}void 0===l&&(l=s?r:[]);let d=(null==s?void 0:s.superMosaic)?f.divergeDepth(r,l):-1,c=(null==n?void 0:n.superMosaic)?f.divergeDepth(a,l):-1;if(s&&s.superMosaic){let e=s;for(let t=d;t<r.length;t++)e=e.superMosaic,null==e||e.checkEmpty();r=s.superMosaic.path,d=s.superMosaic?f.divergeDepth(r,l):-1}if(n&&n.superMosaic){let e=n;for(let t=c;t<a.length;t++)e=e.superMosaic,null==e||e.checkEmpty();a=n.superMosaic.path,c=n.superMosaic?f.divergeDepth(a,l):-1}if(d<0&&c<0)throw new Error("both neighbors unattached! unable to graft");switch(Math.max(d,c)){case d:return this.graft(o,l,s,r,d,1);case c:return this.graft(o,l,n,a,c,0);default:throw new Error("invalid path divergence!")}}}var b=i(794),E=i(273);const S="Mosaic Notebook";class I extends l.NotebookModelFactory{get name(){return"mosaic-notebook"}}const A={id:"mosaic-lab:plugin",description:"Arrange Jupyter notebook cells in any way two-dimensionally. Present your code compactly in Zoom video confrences. Let your Jupyter notebook tell the story and be self-documenting in itself, like a poster presentation. Eliminate white space in your notebook and take advantage of unused screen real estate.",autoStart:!0,requires:[l.INotebookTracker,E.ILauncher,s.IRouter,l.INotebookWidgetFactory,n.IRenderMimeRegistry,r.IEditorServices,o.ISettingRegistry,b.IToolbarWidgetRegistry],optional:[],activate:async(e,t,i,s,o,n,r,a,d)=>{console.log("JupyterLab extension mosaic-lab is activated!"),t.widgetAdded.connect((e,t)=>{const i=(e,t)=>{e.model&&(console.log("adding cell listener"),e.model.cells.changed.connect((e,t)=>{console.log("cell change event",t)}))};t.content.modelChanged.connect(i),i(t.content)});const c=e.docRegistry.getWidgetFactory("Notebook");function h(e,i){const s=i.context.path;void 0!==t.find(e=>e.context.path==s)&&(b.showDialog,b.Dialog)}c._defaultFor=[];const g=new I({disableDocumentWideUndoRedo:!1});e.docRegistry.addModelFactory(g);const u=new l.NotebookWidgetFactory({name:S,fileTypes:["notebook"],defaultFor:["notebook"],modelName:"mosaic-notebook",preferKernel:!0,canStartKernel:!0,rendermime:c.rendermime,mimeTypeService:c.mimeTypeService,contentFactory:new y.ContentFactory({editorFactory:r.factoryService.newInlineEditor})});u.widgetCreated.connect(h),c.widgetCreated.connect(h),e.docRegistry.addWidgetFactory(u);const p={createNew:e=>{t.add(e);const i=l.ToolbarItems.getDefaultItems(e);for(const t of i)e.toolbar.addItem(t.name,t.widget)}};e.docRegistry.addWidgetExtension(S,p),e.commands.addCommand("mosaic:notebook:open",{label:"Notebook (Mosaic)",caption:"Create a new Mosaic Notebook",execute:()=>e.commands.execute("docmanager:new-untitled",{type:"notebook"}).then(t=>e.commands.execute("docmanager:open",{path:t.path,factory:S}))}),i.add({command:"mosaic:notebook:open",category:"Notebook",rank:10})}}}}]);